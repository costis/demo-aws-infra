<%= content_for :demo_title, "Permalink" %>
<%= content_for :demo_summary, "Update the browser URL after filtering" %>
<%= render_demo "/permalinks/demo" %>

<%= render_explanation do %>
  <p>

  </p>
  <p>
    <ul>
      <li>Uses stimulus' Data API for managing the client side state</li>
      <li>Updates the browser <code>history</code> using <code>pushState</code> in an <code>afterReflex</code> - so you always have a permalink in the browser bar representing the current state</li>
      <li>No need to build an API layer that returns JSON.</li>
      <li>The permalink is picked up when the controller is loaded in a non-stimulus-reflex request (i.e. <code>@stimulus_reflex</code> is false.</li>
    </ul>
  </p>
<% end %>

<%= render_gists(
  "app/views/permalinks/_demo.html.erb",
  "app/javascript/controllers/permalink_controller.js",
  "app/controllers/permalinks_controller.rb",
  "app/reflexes/permalink_reflex.rb"
) %>
